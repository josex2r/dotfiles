# Defer initialization of nvm until nvm, node or a node-dependent command is
# run. Ensure this block is only run once if .bashrc gets sourced multiple times
# by checking whether __init_nvm is a function.
if [ -s "$HOME/.nvm/nvm.sh" ] && [ ! "$(type __init_nvm)" = function ]; then
  export NVM_DIR="$HOME/.nvm"

  [ -s "$NVM_DIR/bash_completion" ] && . "$NVM_DIR/bash_completion"

  declare -a __node_commands=('nvm' 'node' 'npm' 'yarn')

  function __init_nvm() {
    for i in "${__node_commands[@]}"; do unalias $i; done
    . "$NVM_DIR"/nvm.sh
    unset __node_commands
    unset -f __init_nvm
  }

  for i in "${__node_commands[@]}"; do alias $i='__init_nvm && '$i; done
fi

# jENV
export PATH="$HOME/.jenv/bin:$PATH"
eval "$(jenv init -)"

# Do not async loading NVM
__init_nvm

# Setup fzf (fuzzy-finder)
[ -s ~/.fzf.zsh ] && source ~/.fzf.zsh

# Preferred editor for local and remote sessions
# if [[ -n $SSH_CONNECTION ]]; then
#   export EDITOR='vim'
# else
#   export EDITOR='nvim'
# fi
